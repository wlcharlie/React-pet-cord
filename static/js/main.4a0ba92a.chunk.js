(this["webpackJsonpreact-pet-cord"]=this["webpackJsonpreact-pet-cord"]||[]).push([[2],{103:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var r=n(65),o=n(1),a=n(40),c=n.n(a),s=n(39),i=n(41),u=n(117),l=n(75),p=n(9),d=n(5),h=function(e){var t=e.component,n=e.path,r=Object(s.c)((function(e){return e.auth.isLoggedIn}));return Object(d.jsx)(p.b,{path:n,render:function(){return r?Object(d.jsx)(t,{}):Object(d.jsx)(p.a,{to:"/login"})}})},b=n(114),j=function(){return Object(d.jsx)(b.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})},m=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(10)]).then(n.bind(null,207))})),f=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,188))})),g=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(7)]).then(n.bind(null,204))})),k=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,198))})),O=function(){return Object(d.jsx)(o.Fragment,{children:Object(d.jsxs)(o.Suspense,{fallback:Object(d.jsx)(j,{}),children:[Object(d.jsx)(p.b,{path:"/",exact:!0,children:Object(d.jsx)(p.a,{to:"/login"})}),Object(d.jsx)(p.b,{path:"/login",component:m}),Object(d.jsx)(h,{path:"/home",component:f}),Object(d.jsx)(h,{path:"/pets",component:g}),Object(d.jsx)(h,{path:"/records",component:k})]})})};var x=function(){return Object(d.jsx)(u.a,{theme:l.theme,children:Object(d.jsx)(O,{})})},y=n(54),v=n(33),S=Object(y.a)({reducer:{auth:v.b.reducer}}),I=function(e){e&&e instanceof Function&&n.e(11).then(n.bind(null,199)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(103);var w=n(77);Object(w.a)(localStorage.getItem("token")).then((function(e){e&&e.res.ok&&e.userRes.ok?S.dispatch(v.a.login(Object(r.a)({token:localStorage.getItem("token")},e.user))):S.dispatch(v.a.logout()),c.a.render(Object(d.jsx)(o.StrictMode,{children:Object(d.jsx)(s.a,{store:S,children:Object(d.jsx)(i.a,{basename:"/React-pet-cord",children:Object(d.jsx)(x,{})})})}),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),I()},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(54),o=Object(r.b)({name:"auth",initialState:{token:null,isLoggedIn:!1,name:"",email:"",id:""},reducers:{login:function(e,t){var n=t.payload,r=n.token,o=n.name,a=n.email,c=n._id;e.token=r,e.isLoggedIn=!0,e.name=o,e.email=a,e.id=c,localStorage.setItem("token",r)},logout:function(e){e.token=null,e.isLoggedIn=!1,localStorage.removeItem("token")}}}),a=o.actions;t.b=o},77:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u}));var r=n(30),o=n.n(r),a=n(42),c="https://pet-cord.herokuapp.com/api",s=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,a,s,i,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,a=t.username,e.prev=1,e.next=4,fetch("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyC7EGVVkokI7pBLBLLzPiJ1yDbVoWpMS1k",{method:"POST",body:JSON.stringify({email:n,password:r,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:return i=e.sent,e.next=10,fetch(c+"/users",{method:"POST",body:JSON.stringify({name:a,email:n,UID:i.localId}),headers:{"Content-Type":"application/json"}});case 10:return u=e.sent,e.next=13,u.json();case 13:return l=e.sent,e.abrupt("return",{res:s,data:i,user:l});case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,a,s,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.prev=1,e.next=4,fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyC7EGVVkokI7pBLBLLzPiJ1yDbVoWpMS1k",{method:"POST",body:JSON.stringify({email:n,password:r,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:return s=e.sent,e.next=10,fetch(c+"/users/"+s.localId,{method:"GET"});case 10:return i=e.sent,e.next=13,i.json();case 13:return u=e.sent,e.abrupt("return",{res:a,data:s,user:u});case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=AIzaSyC7EGVVkokI7pBLBLLzPiJ1yDbVoWpMS1k",{method:"POST",body:JSON.stringify({idToken:t}),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.next=9,fetch(c+"/users/"+r.users[0].localId,{method:"GET"});case 9:return a=e.sent,e.next=12,a.json();case 12:return s=e.sent,e.abrupt("return",{res:n,data:r,userRes:a,user:s});case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()}},[[105,3,4]]]);
//# sourceMappingURL=main.4a0ba92a.chunk.js.map